# Secure Api Lab

## –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ-–ø—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ3
**–¢–µ–º–∞:** –†–æ–∑—Ä–æ–±–∫–∞ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ REST API –Ω–∞ Node.js —Ç–∞ Express  

Lab3 (Secure Api Lab)  
–ö–æ–Ω—Å—Ç—Ä—É—é–≤–∞–Ω–Ω—è –ü—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è (–ö–ü–ó)  

–°—Ç—É–¥–µ–Ω—Ç–∫–∞: –ú–∞—Ç–≤—î—î–Ω–∫–æ –û–ª–µ–∫—Å–∞–Ω–¥—Ä–∞  
–ì—Ä—É–ø–∞: –Ü–ü–ó-3.03  

## –û–ø–∏—Å –ø—Ä–æ—î–∫—Ç—É
–¶–µ–π –ø—Ä–æ—î–∫—Ç ‚Äî –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ REST API –Ω–∞ Node.js —ñ Express, –¥–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–≤—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, —Ä–æ–ª—å–æ–≤–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è, –µ–Ω–¥–ø–æ—ó–Ω—Ç–∏, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫  
**–ú–µ—Ç–∞:** —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–∞—Ö–∏—â–µ–Ω–∏–π REST API –∑ –ø—Ä–∏–∫–ª–∞–¥–∞–º–∏ —Ç–∞ –º–µ—Ö–∞–Ω—ñ–∑–º–∞–º–∏ –∑–∞—Ö–∏—Å—Ç—É  
> –£—Å—ñ –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Ñ–∞–π–ª—ñ data.js, –∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Postman —Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–Ω–∏–π —Å–∫—Ä–∏–ø—Ç test-client.js

## Project start-up
**–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**  
```bash
npm install
```
**–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä:**  
```bash
npm start
```
> –î–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º: http://localhost:3000  

**–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏:**  
```bash
npm test
```
> –í–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞  

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É  
```
üìÅ KPZ_Lab3_Matvieienko-secure-api-lab/
‚îú‚îÄ‚îÄ üìÅ docs/
|   ‚îú‚îÄ‚îÄüìÅ postman-tests/   ‚Üê –ø–∞–ø–∫–∞ –∑—ñ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞–º–∏ —Ç–µ—Å—Ç—ñ–≤ —É Postman
|   ‚îú‚îÄ‚îÄüìÅ screenshots/
‚îú‚îÄ‚îÄ üìÅ node_modules/       ‚Üê —Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ
‚îú‚îÄ‚îÄ üìÑ .gitignore          ‚Üê —Ñ–∞–π–ª –¥–ª—è —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
‚îú‚îÄ‚îÄ üìÑ data.js
‚îú‚îÄ‚îÄ üìÑ package-lock.json
‚îú‚îÄ‚îÄ üìÑ package.json
‚îú‚îÄ‚îÄ üìÑ README.md
‚îú‚îÄ‚îÄ üìÑ server.js
‚îî‚îÄ‚îÄ üìÑ test-client.js
```

## Middleware ‚Äî –ª–æ–≥—É–≤–∞–Ω–Ω—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
–¶—è —Ç–∞–±–ª–∏—Ü—è –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∫–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –≤ —Ä–æ–±–æ—Ç—ñ API –¥–æ —Ç–∞ –ø—ñ—Å–ª—è –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è `middleware` –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó. –°–ø–æ—á–∞—Ç–∫—É —Å–µ—Ä–≤–µ—Ä –±—É–≤ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–∫—Ä–∏—Ç–∏–º, –∞ —Ç–µ–ø–µ—Ä –≤—ñ–Ω –∑–∞—Ö–∏—â–µ–Ω–∏–π, –≤–∞–ª—ñ–¥—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —ñ —Ä–µ–∞–≥—É—î –Ω–∞ —Ä—ñ–∑–Ω—ñ –∑–∞–ø–∏—Ç–∏, –ª–æ–≥—É—é—á–∏ —ó—Ö  
| –î–æ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è Middleware | –ü—ñ—Å–ª—è –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è Middleware |
| :--- | :--- |
| <img src="docs/screenshots/endpoint1.png"> | <img src="docs/screenshots/protected_endpoint1.png"> |
| <img src="docs/screenshots/endpoint2.png"> | <img src="docs/screenshots/protected_endpoint2.png"> |
| <img src="docs/screenshots/endpoint3.png"> | <img src="docs/screenshots/protected_endpoint3.png"> |

## –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏

| HTTP –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å | –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ | –¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É (JSON) | –ú–æ–∂–ª–∏–≤—ñ –∫–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ |
|-------------|-----|------|----------------------|----------------------|---------------------------|
| **GET** | `/documents` | –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏ | `X-Login`, `X-Password` | ‚Äî | 200 OK, 401 Unauthorized |
| **POST** | `/documents` | –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –¥–æ–∫—É–º–µ–Ω—Ç | `X-Login`, `X-Password` | `{ "title": "Text", "content": "Text" }` | 201 Created, 400 Bad Request, 401 Unauthorized |
| **DELETE** | `/documents/:id` | –í–∏–¥–∞–ª–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞ ID | `X-Login`, `X-Password` | ‚Äî | 204 No Content, 401 Unauthorized, 404 Not Found |
| **GET** | `/employees` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ | `X-Login`, `X-Password` (—Ä–æ–ª—å `admin`) | ‚Äî | 200 OK, 401 Unauthorized, 403 Forbidden |

> –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è –∑–∞–ø–∏—Ç–∞ —Å–ø–∏—Å–∫—É —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ (—Ç—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω)  
> <img src="/docs/screenshots/protected_endpoint3.png" width="600">

## HTTP-–∫–æ–¥–∏, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–Ω—è | –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è |
|------|-----------|-----------------------|
| **200 OK** | –ó–∞–ø–∏—Ç –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ | GET /documents, GET /employees |
| **201 Created** | –°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π —Ä–µ—Å—É—Ä—Å | POST /documents |
| **204 No Content** | –í–∏–¥–∞–ª–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ | DELETE /documents/id |
| **400 Bad Request** | –ù–µ–≤—ñ—Ä–Ω—ñ –¥–∞–Ω—ñ —É –∑–∞–ø–∏—Ç—ñ | –í—ñ–¥—Å—É—Ç–Ω—ñ–π title –∞–±–æ content |
| **401 Unauthorized** | –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á | –ù–µ–º–∞—î –∞–±–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ X-Login / X-Password |
| **403 Forbidden** | –ù–µ–º–∞—î –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–µ–∑ —Ä–æ–ª—ñ admin –∑–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ /employees |
| **404 Not Found** | –†–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ | –í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ |

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ä–æ–±–æ—Ç–∏ —á–µ—Ä–µ–∑ Postman

| –ú–µ—Ç–æ–¥ | URL | –ó–∞–≥–æ–ª–æ–≤–∫–∏ (Headers) | –¢—ñ–ª–æ (Body) | –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Å—Ç–∞—Ç—É—Å | –ü—Ä–∏–º—ñ—Ç–∫–∞ | –°–∫—Ä—ñ–Ω—à–æ—Ç |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| `GET` | ` /documents ` | - | - | `401 Unauthorized` | –°–ø—Ä–æ–±–∞ –¥–æ—Å—Ç—É–ø—É –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. | <img src="docs/postman-tests/1.png"> |
| `GET` | ` /employees ` | `X-Login: user1`<br>`X-Password: password123` | - | `403 Forbidden` | –°–ø—Ä–æ–±–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –∞–¥–º—ñ–Ω-—Ä–µ—Å—É—Ä—Å—É –∑ —Ä–æ–ª–ª—é 'user'. | <img src="docs/postman-tests/2.png"> |
| `GET` | ` /documents ` | `X-Login: user1`<br>`X-Password: password123` | - | `200 OK` | –£—Å–ø—ñ—à–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ —Ä–æ–ª–ª—é 'user'. | <img src="docs/postman-tests/3.png"> |
| `GET` | ` /employees ` | `X-Login: admin1`<br>`X-Password: password123` | - | `200 OK` | –£—Å–ø—ñ—à–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –∑ —Ä–æ–ª–ª—é 'admin'. | <img src="docs/postman-tests/4.png"> |
| `POST` | ` /documents ` | `X-Login: user1`<br>`X-Password: password123` | ` { "title": "Test Doc", "content": "..." } ` | `201 Created` | –£—Å–ø—ñ—à–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—É. | <img src="docs/postman-tests/5.png"> |
| `POST` | ` /documents ` | `X-Login: user1`<br>`X-Password: password123` | ` { "content": "..." } ` | `400 Bad Request` | –ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó (–≤—ñ–¥—Å—É—Ç–Ω—î –ø–æ–ª–µ `title`). | <img src="docs/postman-tests/6.png"> |
| `DELETE` | ` /documents/1 ` | `X-Login: admin1`<br>`X-Password: password123` | - | `204 No Content` | –£—Å–ø—ñ—à–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è. –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ –º–∞—î —Ç—ñ–ª–∞. | <img src="docs/postman-tests/7.png"> |
| `GET` | ` /non-existent ` | `X-Login: admin1`<br>`X-Password: password123` | - | `404 Not Found` | –ó–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç—É. | <img src="docs/postman-tests/8.png"> |

## –¢–µ—Å—Ç–æ–≤–∏–π –∫–ª—ñ—î–Ω—Ç `test-client.js`

–§–∞–π–ª –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ API –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±–∞–∑–æ–≤–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤:

- –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (200 OK)  
- –°–ø—Ä–æ–±–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ —è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (403 Forbidden)  
- –£—Å–ø—ñ—à–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ —è–∫ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä (200 OK)  

<img src="docs/screenshots/test-client.png" width="400">  

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è
ü•Ä [–†–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π GitHub](https://github.com/Allaandra/KPZ_Lab3_Matvieienko-secure-api-lab)  
ü•Ä [–Ü—Å—Ç–æ—Ä—ñ—è –∫–æ–º—ñ—Ç—ñ–≤](https://github.com/Allaandra/KPZ_Lab3_Matvieienko-secure-api-lab/commits/main/)  
ü•Ä [–°–∫—Ä—ñ–Ω—à–æ—Ç–∏ —Ç–µ—Å—Ç—ñ–≤ —É Postman](https://github.com/Allaandra/KPZ_Lab3_Matvieienko-secure-api-lab/tree/main/docs/postman-tests)  
ü•Ä [–Ü–Ω—à—ñ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏](https://github.com/Allaandra/KPZ_Lab3_Matvieienko-secure-api-lab/tree/main/docs/screenshots)